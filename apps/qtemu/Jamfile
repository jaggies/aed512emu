SubDir TOP apps qtemu ;
SubDirHdrs $(TOP) lib aed ;
SubDirHdrs $(TOP) lib core ;
SubDirHdrs $(TOP) lib cpu ;
SubDirHdrs $(TOP) lib devices ;
SubDirHdrs $(TOP) lib dis6502 ;
SubDirHdrs $(TOP) lib mos6502 ;
SubDirHdrs $(TOP) lib util ;
SubDirHdrs /opt/local/include ;
SubDirHdrs $(QTDIR) ;

if $(OS) = MACOSX {
    FRAMEWORKS += OPENGL GLUT QtCore QtGui QtOpenGL QtWidgets ;
    LINKLIBS += -F $(QTFRAMEWORK) -framework\ $(FRAMEWORKS) ;
    INCLUDE += $(QT)/include ;
    LIBDIRS += $(QT)/lib ;
    LINKLIBS += -L$(LIBDIRS) ;
    CCFLAGS += $(LINKLIBS) -DMACOSX ;
    C++FLAGS += $(LINKLIBS) -DMACOSX -F $(QTFRAMEWORK) ;
} else {
    LINKLIBS += -L/usr/lib/x86_64-linux-gnu/ ;
    LINKLIBS = -lGL -lQt5Gui -lQt5Core -lQt5OpenGL -lQt5Widgets $(LINKLIBS) ;
}

LINKLIBS on qtemu += $(OPENGLLIBS) $(LINKLIBS) ;

Uic ui_mainwindow.h : mainwindow.ui ;
Moc moc_mainwindow.h : mainwindow.h ;
Moc moc_glwidget.h : glwidget.h ;
Moc moc_workerthread.h : workerthread.h ;

Depends qtemu : libemu.a ;
LINKLIBS on qtemu = $(LINKLIBS) -lemu -lglut -lGLU -lGL -lGLEW ;

Main qtemu : 
	drawpixelrenderer.cpp
	gltexturerenderer.cpp
	glwidget.cpp
	main.cpp
	mainwindow.cpp
	moc.cpp
	renderer.cpp
	vbo.cpp
	vertex.cpp
	workerthread.cpp
	;
